<body>

    <div class="container mt-5">

        <form action="/inquilinos/insertar" method="POST" onsubmit="return confirmaInsertar()">
           
            <% if (typeof mensaje !=="undefined" && mensaje) { %>
                <div class="alert alert-danger">
                    <%= mensaje %>
                </div>
                <% } %>
            <div class="mt-5"><b> INQUILINOS</b></div>

            <div class="row mb-3 mt-5">
                <div class="col-md-4 mb-3">
                    <label for="nombre" class="form-label">Nombre</label>
                    <input type="text" class="form-control" id="nombre" name="nombre"
                        placeholder="Nombre del inquilino"required>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="apellido" class="form-label">Apellido</label>
                    <input type="text" class="form-control" id="apellido" name="apellido"
                        placeholder="Nombre del inquilino"required>

                </div>
                <div class="col-md-4 mb-3">
                    <label for="dni" class="form-label">DNI</label>
                    <input type="text" class="form-control" id="dni" name="dni" placeholder="Dni del inquilino" required>

                </div>
            </div>
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="cuil" class="form-label">Cuil</label>
                    <input type="text" class="form-control" id="cuil" name="cuil" placeholder="Cuil del inquilino">
                </div>
                <div class="col-md-4 mb-3">
                    <label for="direccion" class="form-label">Direccion</label>
                    <input type="text" class="form-control" id="direccion" name="direccion"
                        placeholder="Direccion del inquilino">
                </div>

                <div class="col-md-4 mb-3">
                    <label for="telefono" class="form-label">Telefono</label>
                    <input type="text" class="form-control" id="telefono" name="telefono"
                        placeholder="Telefono del inquilino">
                </div>

            </div>
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="celular" class="form-label">Celular</label>
                    <input type="text" class="form-control" id="celular" name="celular"
                        placeholder="Celular del inquilino">
                </div>
                <div class="col-md-4 mb-3">
                    <label for="correo_elec" class="form-label">Correo electrónico</label>
                    <input type="email" class="form-control" id="correo_elec" name="correo_elec"
                        placeholder="Correo del inquilino">
                </div>

            </div>
            <div class="col-md-4 mb-3 p-3 mt-1">
                <button type="submit" class="btn btn-primary w-100">Guardar</button>
            </div>
        </form>
    </div>
    <div class="container mt-3">
        <div class="">
            <hr style="border-color: blue;border-width: 3px;border-style: solid;">
        </div>
        <form class="row mt-3" action="/inquilinos/buscar" method="POST">


            <div class="col-md-4 mb-3">
                <input type="text" class="form-control bg-success p-2 text-dark bg-opacity-10;" id="datos" name="datos"
                    placeholder="Buscar por apellido">
            </div>
            <div class="col-md-4 mb-3 ">
                <button type="submit" class="btn btn-warning w-100">Buscar</button>
            </div>
        </form>

        <div class="container mt-2">
            <h1>Lista de Inquilinos</h1>

            <div class="row mt-3">
                <div class="col">
                    <table class="table table-striped table-bordered border-primary">

                        <thead>
                            <thead>
                                <tr>
                                    <th class="text-primary" scope="col">ID</th>
                                    <th class="text-primary" scope="col">Nombre</th>
                                    <th class="text-primary" scope="col">Apellido</th>
                                    <th class="text-primary" scope="col">DNI</th>
                                    <th class="text-primary" scope="col">Cuil</th>
                                    <th class="text-primary" scope="col">Direccion</th>
                                    <th class="text-primary" scope="col">Telefono</th>
                                    <th class="text-primary" scope="col">Celular</th>
                                    <th class="text-primary" scope="col">Correo Electronico</th>
                                    <th class="text-primary" scope="col">Editar</th>
                                    <th class="text-primary" scope="col">Eliminar</th>
                                </tr>
                            </thead>
                        <tbody>
                            <% inquilinos.forEach(function(inquilino) { %>
                                <tr>

                                    <td>
                                        <%= inquilino.id_inquilinos %>
                                    </td>
                                    <td>
                                        <%= inquilino.nombre %>
                                    </td>
                                    <td>
                                        <%= inquilino.apellido %>
                                    </td>
                                    <td>
                                        <%= inquilino.dni %>
                                    </td>
                                    <td>
                                        <%= inquilino.cuit %>
                                    </td>
                                    <td>
                                        <%= inquilino.direccion %>
                                    </td>
                                    <td>
                                        <%= inquilino.telefono %>
                                    </td>
                                    <td>
                                        <%= inquilino.celular %>
                                    </td>
                                    <td>
                                        <%= inquilino.correo_elec %>
                                    </td>
                                    <td> <a href="/inquilinos/editar/<%= inquilino.id_inquilinos %>"
                                            class="btn btn-warning">Editar</a> </td>

                                    <td>
                                        <form action="/inquilinos/eliminar" method="POST" style="display:inline;">
                                            <input type="hidden" name="id_inquilinos"
                                                value="<%= inquilino.id_inquilinos %>">
                                            <button type="submit" class="btn btn-danger"
                                                onclick="return confirm('¿Seguro que deseas eliminar este inquilino?')">Eliminar</button>
                                        </form>
                                    </td>
                                </tr>
                                <% }); %>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <link rel="stylesheet" href="css/inquilinos.css">
    <script>
function confirmaInsertar() {
    if (confirm("¿Desea guardar este inquilino?")) {
        return true; // Envía el formulario
    } else {
        // Limpia todos los campos del formulario de inserción
        const form = document.querySelector('form[action="/inquilinos/insertar"]');
        if (form) {
            form.reset();
        }
        return false; // No envía el formulario
    }
}
</script>
</body>

</html>