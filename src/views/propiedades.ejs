<body>
  <div class="container mt-5">
    <form class="row g-3 mt-2" action="/propiedades/insertar" method="POST">

      <div class="mt 5">
        <h1><b>PROPIEDADES</b></h1>
      </div>

      <div class="row mb-3 mt-5">
        <!-- <div class="col-md-6 mb-3">
          <label for="id_propiedades" class="form-label">ID Propiedad</label>
          <input type="text" class="form-control" id="id_propiedades" name="id_propiedades"
            placeholder="ID de la propiedad" required>
        </div> -->
        <div class="col-md-3">
          <label for="direccion" class="form-label">direccion</label>
          <input type="text" class="form-control" id="direccion" name="direccion"
            placeholder="Direccion de la propiedad">
        </div>
        <div class="col-md-3 mb-3">
          <label for="localidad" class="form-label">Localidad</label>
          <class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
              data-bs-toggle="dropdown" aria-expanded="false">
              Seleccionar localidad
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <li><a class="dropdown-item" href="#" onclick="seleccionarLocalidad('Adrogué')">Adrogué</a></li>
              <li><a class="dropdown-item" href="#" onclick="seleccionarLocalidad('Burzaco')">Burzaco</a></li>
              <li><a class="dropdown-item" href="#" onclick="seleccionarLocalidad('Longchamps')">Longchamps</a></li>
            </ul>

            <input type="hidden" id="localidad" name="localidad">
            <script>
              function seleccionarLocalidad(valor) {
                document.getElementById('localidad').value = valor;
                document.getElementById('dropdownMenuButton').textContent = valor;
              } 
            </script>
        </div>


        <div class="col-md-3 mb-3">
          <label for="propietario" class="form-label">Propietario</label>
          <select class="form-select" id="propietario" name="propietario" required>
            <option value="">Seleccione un propietario</option>
            <% if (propietarios && propietarios.length> 0) { %>
              <% propietarios.forEach(function(prop) { %>
                <option value="<%= prop.id_propietarios %>">
                  <%= prop.apellido %>, <%= prop.nombre %>
                </option>
                <% }); %>
                  <% } %>
          </select>
        </div>
        <div class="col-md-3 mb-3">

          <label for="impuesto" class="form-label">Impuestos</label>
          <input type="text" class="form-control" id="impuesto" name="impuesto" placeholder="impuestos">
        </div>



      </div>

      <div class="col-md-3 mb-3">
        <button type="submit" class="btn btn-success w-100">Guardar</button>
      </div>
    </form>
  </div>
  <div class="container mt-5">



    <form class="row g-3 mt-3" action="/propiedades" method="POST">


      <div class="col-md-6 mb-3">
        <input type="text" class="form-control" id="datos" name="datos" placeholder="Buscar por direccion">
      </div>
      <div class="col-md-3 mb-5">
        <button type="submit" class="btn btn-primary w-100">Buscar</button>
      </div>
    </form>

    <div class="container mt-5">
      <h1>Lista de Propiedades</h1>

      <div class="row mt-3">
        <div class="col">
          <table class="table table-striped table-bordered border-primary">

            <thead>
              <tr>
                <th class="text-primary" scope="col">ID</th>
                <th class="text-primary" scope="col">Direccion</th>
                <th class="text-primary" scope="col">Localidad</th>
                <th class="text-primary" scope="col">Propietario</th>
                <th class="text-primary" scope="col">Impuestos</th>
                <th class="text-primary" scope="col">Editar</th>
                <th class="text-primary" scope="col">Eliminar</th>
              </tr>
            </thead>
            <tbody>
              <% propiedades.forEach(function(propiedad) { %>
                <tr>
                  <td>
                    <%= propiedad.id_propiedades %>
                  </td>
                  <td>
                    <%= propiedad.direccion %>
                  </td>
                  <td>
                    <%= propiedad.localidad %>
                  </td>
                  <td>
                    <%= propiedad.propietario %>
                  </td>
                  <td>
                    <%= propiedad.impuesto %>
                  </td>
                  <td>
                    <a href="/propiedades/editar/<%= propiedad.id_propiedades %>" class="btn btn-warning">Editar</a>
                  </td>
                  <td>

                    <form action="/propiedades/eliminar" method="POST" style="display:inline;">
                      <input type="hidden" name="id_propiedades" value="<%= propiedad.id_propiedades %>">
                      <button type="submit" class="btn btn-danger"
                        onclick="return confirm('¿Seguro que deseas eliminar esta propiedad?')">Eliminar</button>

                    </form>
                  </td>

                  <% }); %>
            </tbody>
          </table>
        </div>

      </div>
    </div>
    <script>
      function confirmarEliminacion() {
        return confirm("¿Está seguro que desea eliminar esta propiedad?");
      }
    </script>
  

</body>

</html>