  <body
    class="flex flex-col items-center justify-center min-h-screen p-4 bg-gray-100"
  >
    <form>
    <input
  type="hidden"
  name="numrecibo"
  value="<%= numrecibo %>"
/>

      
         <div class="receipt-container">
        <div class="receipt-header">
          <h1>RECIBO PROPIETARIO</h1>
        </div>

        <div class="receipt-details">
          <div class="right">
            <p>
              <strong>Fecha:</strong>

              <%= fechaActual %>
            </p>
          </div>
        </div>
        <div class="receipt-details1">
          <div class="left">
            <p>
              <strong>Recibo Nº:</strong>
              <span id="receiptNumber"> <%= reciboProp.numrecibo %> </span>
            </p>
          </div>

          <div class="center">
            <p>
              <strong>Fecha Rec Pago:</strong>
              <span id="ownerFecha">
                <%= new Date(reciboProp.fecha).toLocaleDateString("es-AR") %>
              </span>
            </p>
          </div>
          <div class="right">
            <p>
              <strong>Mes Cont:</strong>
              <span id="ownerName"> <%= reciboProp.cuota %> </span>
            </p>
          </div>
        </div>

        <div class="receipt-item">
          <p>
            <strong>Recibí de:</strong> GARROTE PROPIEDADES la suma de pesos <%=
            letra %>, ($ <%= Number(reciboProp.total).toLocaleString("es-AR",
            {minimumFractionDigits: 2}) %>) en concepto de pago de la locación
            correspondiente a la propiedad ubicada en la localidad de <%=
            propiedades.localidad %>, con frente a la calle <%=
            propiedades.direccion %>, mes de <%= mes_contrato %> con vencimiento
            el dia <%= vencimiento %> de <%= mes_contrato %>.
          </p>
        </div>
        <div class="form-row">
          <label for="mensualidad" class="form-label">Mensualidad</label>
          <span>$</span>
          <input
            type="text"
            name="mensualidad"
            value="<%= reciboProp.importemensual %>"
            readonly
          />
        </div>
        <div class="form-row">
          <label for="exp_extraor" class="form-label"
            >EXPENSAS EXTRAORDINARIAS</label
          >
          <span>$</span>
          <input
            type="text"
            name="exp_extraor"
            value="<%= reciboProp.exp_extraor %>"
            readonly
          />
        </div>
        <div class="form-row">
          <label for="seguro" class="form-label">SEGURO</label>
          <span>$</span>
          <input
            type="text"
            name="seguro"
            value="<%= reciboProp.seguro %>"
            readonly
          />
        </div>
        <div class="form-row">
          <label for="varios" class="form-label">VARIOS</label>
          <span>$</span>
          <input
            type="text"
            name="varios"
            value="<%= reciboProp.varios %>"
            readonly
          />
        </div>

        <div class="form-row">
          <label for="honorarios" class="form-label">HONORARIOS</label>
          <span>$</span>
          <input
            type="text"
            name="honorarios"
            value="<%= reciboProp.honorarios %>"
            readonly
          />
        </div>

        <div class="receipt-total">
          Total:
          <span id="totalAmount"
            ><span>$</span>
            <%= Number(reciboProp.total).toLocaleString("es-AR",
            {minimumFractionDigits: 2}) %>
          </span>
        </div>

        <div class="receipt-signature">
          <div class="signature-line"></div>
          <p>Firma y Aclaración</p>
        </div>
      </div>
      <div class="form-row mt-6">
       <div class="form-row mt-4 flex gap-4">
  <script>
  // Obtener el número de recibo del campo oculto o de entrada
  const numreciboInput = document.querySelector("[name='numrecibo']");
  const numrecibo = numreciboInput ? numreciboInput.value : null; // Asegurarse de que existe

  // Botón para imprimir (descargar) un recibo individual
  document.getElementById("btnImprimirUno").addEventListener("click", async () => {
    if (numrecibo) {
      // Abre la URL en una nueva pestaña para forzar la descarga
      // Asegúrate de que tu ruta en el backend (/generar_pdf/:numrecibo)
      // responda con res.download()
      window.open(`/generar_pdf/${numrecibo}`, '_blank');
      // Opcional: Puedes redirigir después de un breve retraso si no quieres una nueva pestaña
      // setTimeout(() => {
      //   window.location.href = "/recibo_propietario";
      // }, 500);
    } else {
      // Mostrar un mensaje si no hay número de recibo
      const messageBox = document.getElementById("messageBox");
      messageBox.textContent = "Error: No se encontró el número de recibo para descargar.";
      messageBox.className = "mt-4 p-3 rounded-md text-center bg-red-100 text-red-700";
      messageBox.style.display = "block";
    }
  });

  // Botón para imprimir (descargar) todos los recibos del día
  document.getElementById("btnImprimirTodos").addEventListener("click", async () => {
    // Abre la URL en una nueva pestaña para forzar la descarga
    // Asegúrate de que tu ruta en el backend (/generar_pdfs_dia)
    // responda con res.download()
    window.open(`/generar_pdfs_dia`, '_blank');
    // Opcional: Puedes redirigir después de un breve retraso si no quieres una nueva pestaña
    // setTimeout(() => {
    //   window.location.href = "/recibo_propietario";
    // }, 500);
  });

  // Si quieres que el usuario vea un mensaje de "procesando" o "descarga iniciada"
  // puedes usar la messageBox.
  function showMessage(message, type = "info") {
    const messageBox = document.getElementById("messageBox");
    messageBox.textContent = message;
    messageBox.className = `mt-4 p-3 rounded-md text-center ${
      type === "success" ? "bg-green-100 text-green-700" :
      type === "error" ? "bg-red-100 text-red-700" :
      "bg-blue-100 text-blue-700"
    }`;
    messageBox.style.display = "block";
    // Opcional: ocultar el mensaje después de un tiempo
    // setTimeout(() => { messageBox.style.display = "hidden"; }, 5000);
  }
</script>

<link rel="stylesheet" href="/css/recibo_imprimir.css" />
   
  </body>
</html>

